# "–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –∫ –∑–∞–Ω—è—Ç–∏—é ¬´–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ. –ß–∞—Å—Ç—å 2¬ª" - –•–æ–º—è–∫–æ–≤ –ê–Ω—Ç–æ–Ω.

### –ó–∞–¥–∞–Ω–∏–µ 1

–û–ø–∏—à–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç–æ–¥–∞–º–∏:
- –∞–∫—Ç–∏–≤–Ω—ã–π master-—Å–µ—Ä–≤–µ—Ä –∏ –ø–∞—Å—Å–∏–≤–Ω—ã–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π slave-—Å–µ—Ä–≤–µ—Ä; 
- master-—Å–µ—Ä–≤–µ—Ä –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ slave-—Å–µ—Ä–≤–µ—Ä–æ–≤;
- –∞–∫—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ ‚Äî distributed replicated block device (DRBD);
- SAN-–∫–ª–∞—Å—Ç–µ—Ä.

*–î–∞–π—Ç–µ –æ—Ç–≤–µ—Ç –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ.*

### –†–µ—à–µ–Ω–∏–µ 1

–ú–µ—Ç–æ–¥—ã –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏—Ö –ø—Ä–∏–º—É—â–µ—Å—Ç–≤–∞:
1. –ê–∫—Ç–∏–≤–Ω—ã–π master-—Å–µ—Ä–≤–µ—Ä –∏ –ø–∞—Å—Å–∏–≤–Ω—ã–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π slave-—Å–µ—Ä–≤–µ—Ä:

–û–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä (master) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ —á—Ç–µ–Ω–∏–µ, –∏ –∑–∞–ø–∏—Å—å. –í—Ç–æ—Ä–æ–π (slave) ‚Äî –ø—Ä–æ—Å—Ç–æ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è. –û–Ω –Ω–µ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –∞ –ª–∏—à—å –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é.

–ü–ª—é—Å—ã:

–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: –µ—Å–ª–∏ master —É–ø–∞–¥—ë—Ç, –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ slave.
–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–∑–æ–≤–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏.
–û—Ç–ª–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ ‚Äî –º–∏–Ω–∏–º—É–º –ª–∏—à–Ω–µ–π –ª–æ–≥–∏–∫–∏.

2. Master-—Å–µ—Ä–≤–µ—Ä –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ slave-—Å–µ—Ä–≤–µ—Ä–æ–≤ (Master-Slave)
:
–û–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä (master) –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –≤—Å–µ–º–∏ –∑–∞–ø–∏—Å—è–º–∏, –æ—Å—Ç–∞–ª—å–Ω—ã–µ (slaves) —á–∏—Ç–∞—é—Ç –¥–∞–Ω–Ω—ã–µ. –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏–¥—ë—Ç —Ç–æ–ª—å–∫–æ –æ—Ç master –∫ slave.

–ü–ª—é—Å—ã:

–†–∞–∑–≥—Ä—É–∑–∫–∞: master –ø–∏—à–µ—Ç, slaves —á–∏—Ç–∞—é—Ç ‚Äî –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –∫–∞–∂–¥—ã–π —É–∑–µ–ª.
–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —á—Ç–µ–Ω–∏—é: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å slaves, –µ—Å–ª–∏ —Ä–∞—Å—Ç—ë—Ç —á–∏—Å–ª–æ –∫–ª–∏–µ–Ω—Ç–æ–≤.
–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: –µ—Å–ª–∏ master —É–ø–∞–¥—ë—Ç ‚Äî –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–¥–µ–ª–∞—Ç—å –æ–¥–Ω–æ–≥–æ –∏–∑ slaves –Ω–æ–≤—ã–º master.

3. –ê–∫—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ DRBD (Distributed Replicated Block Device):

DRBD ‚Äî —ç—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–ª–æ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –¢–æ –µ—Å—Ç—å –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –Ω–µ —Å–∞–º–∏ —Ç–∞–±–ª–∏—Ü—ã, –∞ –∫—É—Å–∫–∏ –¥–∏—Å–∫–∞.

–ü–ª—é—Å—ã:

–ü–æ—á—Ç–∏ –∏–¥–µ–∞–ª—å–Ω–æ–µ –∑–µ—Ä–∫–∞–ª–æ: slave —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–Ω—É—é –∫–æ–ø–∏—é –¥–∏—Å–∫–∞ master‚Äô–∞.
–í—ã—Å–æ–∫–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–±–æ—è—Ö ‚Äî –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã—Ö —Å–∏—Å—Ç–µ–º.
–ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–º –ü–û (Pacemaker/Corosync) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è.

4. SAN-–∫–ª–∞—Å—Ç–µ—Ä (Storage Area Network):

–û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (–Ω–æ–¥—ã) –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–æ –æ–±—â–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ ‚Äî —á–µ—Ä–µ–∑ SAN.

–ü–ª—é—Å—ã:

–í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: –µ—Å–ª–∏ –æ–¥–Ω–∞ –Ω–æ–¥–∞ –ø–∞–¥–∞–µ—Ç ‚Äî –¥—Ä—É–≥–∞—è —Å—Ä–∞–∑—É –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç.
–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: –ª–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å, –±—ç–∫–∞–ø–∏—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å.
–û—Ç–ª–∏—á–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–º–∏ —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∏ failover-—Ä–µ—à–µ–Ω–∏—è–º–∏.

---
### –ó–∞–¥–∞–Ω–∏–µ 2

–†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ –ø–ª–∞–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ —à–∞—Ä–∏–Ω–≥–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö —Ç–∞–±–ª–∏—Ü: 

- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, 
- –∫–Ω–∏–≥–∏, 
- –º–∞–≥–∞–∑–∏–Ω—ã (—Å—Ç–æ–ª–±—Ü—ã –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ). 

–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∏ –∏—Ö —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏–ª–∏ —Ä–∞–∑–±–∏–≤–∫—É –º–µ–∂–¥—É –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.

*–ü—Ä–∏—à–ª–∏—Ç–µ –±–ª–æ–∫—Å—Ö–µ–º—É, –≥–¥–µ –∏ —á—Ç–æ –±—É–¥–µ—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è. –û–ø–∏—à–∏—Ç–µ, –≤ –∫–∞–∫–∏—Ö —Ä–µ–∂–∏–º–∞—Ö –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–∞.* 

### –†–µ—à–µ–Ω–∏–µ 2

—É –Ω–∞—Å –µ—Å—Ç—å —Ç—Ä–∏ —Ç–∞–±–ª–∏—Ü—ã:
üìÅ users, üìö books, üè™ shops.


‚úÖ –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —à–∞—Ä–¥–∏–Ω–≥ ‚Äî –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º
–°—É—Ç—å: –†–∞–∑–¥–µ–ª–∏–º —Ç–∞–±–ª–∏—Ü—ã –ø–æ –∏—Ö —Ä–æ–ª–∏:

| –°–µ—Ä–≤–µ—Ä | –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç | –ü—Ä–∏—á–∏–Ω–∞                                              |
| ------ | ---------- | ---------------------------------------------------- |
| DB1    | `users`    | –û—Ç–¥–µ–ª—å–Ω–∞—è –ë–î –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –ø—Ä–æ—Ñ–∏–ª–µ–π –∏ —Ç.–ø.        |
| DB2    | `books`    | –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–º–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö)         |
| DB3    | `shops`    | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–ª–∏—á–∏–∏, —Ü–µ–Ω–∞—Ö, —Å–≤—è–∑—è—Ö —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |

‚úÖ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —à–∞—Ä–¥–∏–Ω–≥ ‚Äî –ø–æ –Ω–∞–≥—Ä—É–∑–∫–µ –∏ –æ–±—ä—ë–º—É
–°—É—Ç—å: –î–µ–ª–∏–º –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Ç–∞–±–ª–∏—Ü –ø–æ –∫–∞–∫–æ–º—É-—Ç–æ –∫—Ä–∏—Ç–µ—Ä–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä:

users ‚Äî –ø–æ —Å—Ç—Ä–∞–Ω–µ/—Ä–µ–≥–∏–æ–Ω—É (Europe, Asia, America).
books ‚Äî –ø–æ –∂–∞–Ω—Ä—É –∏–ª–∏ ID (shard1: ID 1‚Äì50000, shard2: 50001‚Äì100000).
shops ‚Äî –ø–æ –ª–æ–∫–∞—Ü–∏–∏ (–ú–æ—Å–∫–≤–∞, –°–ü–±, –ö–∞–∑–∞–Ω—å –∏ —Ç.–¥.)


#### –ë–ª–æ–∫ —Å—Ö–µ–º—ã:

![–°–∫—Ä–∏–Ω—à–æ—Ç](3.png)

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–æ–≤
- –í—Å–µ –ë–î-—Å–µ—Ä–≤–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ Master-Slave-—Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏, –∫–∞–∂–¥—ã–π master –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å, –∞ –µ–≥–æ slaves ‚Äî —á—Ç–µ–Ω–∏–µ.
- Proxy-—Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, ProxySQL) ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∞–±–ª–∏—Ü—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —à–∞—Ä–¥–∏–Ω–≥–∞.
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ failover —á–µ—Ä–µ–∑ Orchestrator –∏–ª–∏ –∞–Ω–∞–ª–æ–≥.

### –ü—Ä–∏–º–µ—Ä—ã —à–∞—Ä–¥–∏–Ω–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö:
| –¢–∞–±–ª–∏—Ü–∞ | –ö—Ä–∏—Ç–µ—Ä–∏–π   | –ü—Ä–∏–º–µ—Ä                               |
| ------- | ---------- | ------------------------------------ |
| `users` | –ø–æ —Ä–µ–≥–∏–æ–Ω—É | `users_ru`, `users_eu`, `users_asia` |
| `books` | –ø–æ ID      | ID 1‚Äì50K, 50K‚Äì100K                   |
| `shops` | –ø–æ –≥–æ—Ä–æ–¥—É  | `shops_msk`, `shops_spb`             |

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è (—Å–æ –∑–≤—ë–∑–¥–æ—á–∫–æ–π*)

–≠—Ç–∏ –∑–∞–¥–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ, —Ç–æ –µ—Å—Ç—å –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é, –∏ –Ω–∏–∫–∞–∫ –Ω–µ –ø–æ–≤–ª–∏—è—é—Ç –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤–∞–º–∏ –∑–∞—á—ë—Ç–∞ –ø–æ —ç—Ç–æ–º—É –¥–æ–º–∞—à–Ω–µ–º—É –∑–∞–¥–∞–Ω–∏—é. –í—ã –º–æ–∂–µ—Ç–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–∏—Ç—å, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≥–ª—É–±–∂–µ —à–∏—Ä–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –º–∞—Ç–µ—Ä–∏–∞–ª–µ.
#### –ó–∞–¥–∞–Ω–∏–µ 3*

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —à–∞—Ä–¥–∏–Ω–≥–∞ –∏–∑ –∑–∞–¥–∞–Ω–∏—è 2.

–ü—Ä–∏—à–ª–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥ Docker –∏ SQL —Å–∫—Ä–∏–ø—Ç —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

### –†–µ—à–µ–Ω–∏–µ 3

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞—Ä–¥–∏–Ω–≥–∞ –≤ MySQL —Å –ø–æ–º–æ—â—å—é Docker –∏ SQL-—Å–∫—Ä–∏–ø—Ç–æ–≤:

3 —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: users_db, books_db, shops_db

–ö–∞–∂–¥–∞—è –ë–î –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

–®–∞—Ä–¥–∏–Ω–≥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –º–∞–≥–∞–∑–∏–Ω—ã) –∏ –∂–∞–Ω—Ä—É (–∫–Ω–∏–≥–∏)


### docker-compose.yml:
```
version: '3.9'

services:
  users-db:
    image: mysql:8.0
    container_name: users_db
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: rootpass
      MYSQL_DATABASE: users_db
    ports:
      - "3307:3306"
    volumes:
      - ./sql/users_init.sql:/docker-entrypoint-initdb.d/init.sql
	  - ./mysql_data/users:/var/lib/mysql

  books-db:
    image: mysql:8.0
    container_name: books_db
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: rootpass
      MYSQL_DATABASE: books_db
    ports:
      - "3308:3306"
    volumes:
      - ./sql/books_init.sql:/docker-entrypoint-initdb.d/init.sql
	  - ./mysql_data/books:/var/lib/mysql

  shops-db:
    image: mysql:8.0
    container_name: shops_db
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: rootpass
      MYSQL_DATABASE: shops_db
    ports:
      - "3309:3306"
    volumes:
      - ./sql/shops_init.sql:/docker-entrypoint-initdb.d/init.sql
	  - ./mysql_data/shops:/var/lib/mysql
```
### SQL –°–∫—Ä–∏–ø—Ç—ã:

## sql/users_init.sql:
```
CREATE DATABASE IF NOT EXISTS users_db;
USE users_db;

CREATE TABLE IF NOT EXISTS users_ru (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100),
    region VARCHAR(50) DEFAULT 'RU',
    email VARCHAR(150)
);

CREATE TABLE IF NOT EXISTS users_eu (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100),
    region VARCHAR(50) DEFAULT 'EU',
    email VARCHAR(150)
);
```

## sql/books_init.sql:
```
CREATE DATABASE IF NOT EXISTS books_db;
USE books_db;

CREATE TABLE IF NOT EXISTS books_sf (
    book_id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    genre VARCHAR(50) DEFAULT 'Sci-Fi',
    author VARCHAR(100)
);

CREATE TABLE IF NOT EXISTS books_drama (
    book_id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    genre VARCHAR(50) DEFAULT 'Drama',
    author VARCHAR(100)
);
```

## sql/shops_init.sql:
```
CREATE DATABASE IF NOT EXISTS shops_db;
USE shops_db;

CREATE TABLE IF NOT EXISTS shops_moscow (
    shop_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(150),
    city VARCHAR(100) DEFAULT 'Moscow',
    address TEXT
);

CREATE TABLE IF NOT EXISTS shops_kazan (
    shop_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(150),
    city VARCHAR(100) DEFAULT 'Kazan',
    address TEXT
);
```
![–°–∫—Ä–∏–Ω—à–æ—Ç 1](1.png)
![–°–∫—Ä–∏–Ω—à–æ—Ç 2](2.png)

---
